<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
<th:block th:include="include :: header('新增资产')" />
</head>
<body class="white-bg">
	<div class="wrapper wrapper-content animated fadeInRight ibox-content">
		<form class="form-horizontal m" id="form-xzAsstes-add">
			<h4 class="form-header h4">基本信息</h4>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label"><span
							style="color: red;">*</span>资产编码：</label>
						<div class="col-sm-8">
							<input id="assetsId" name="assetsId" class="form-control"
								type="text" required>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label"><span
							style="color: red;">*</span>地域：</label>
						<div class="col-sm-8">
							<div class="input-group" style="width: 100%">
								<select name="region" class="form-control m-b"
									th:with="type=${@dict.getType('xz_assets_region')}" required>
									<option value=""></option>
									<option th:each="dict : ${type}" th:text="${dict.dictLabel}"
										th:value="${dict.dictValue}"></option>
								</select>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label"><span
							style="color: red;">*</span>资产名称：</label>
						<div class="col-sm-8">
							<input id="assetsName" name="assetsName" class="form-control"
								type="text" required>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">分类码s/n：</label>
						<div class="col-sm-8">
							<input id="category" name="category" class="form-control"
								type="text">
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label"><span
							style="color: red;">*</span>资产分类：</label>
						<div class="col-sm-8">
							<div class="input-group" style="width: 100%">
								<select name="assetsType" class="form-control m-b"
									th:with="type=${@dict.getType('xz_assets_assetsType')}"
									required>
									<option value=""></option>
									<option th:each="dict : ${type}" th:text="${dict.dictLabel}"
										th:value="${dict.dictValue}"></option>
								</select>
							</div>
						</div>
					</div>
				</div>

				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">资产型号：</label>
						<div class="col-sm-8">
							<input id="assetsModel" name="assetsModel" class="form-control"
								type="text">
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label"><span
							style="color: red;">*</span>单价：</label>
						<div class="col-sm-8">
							<input id="price" name="price" class="form-control" type="text"
								required>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">单位：</label>
						<div class="col-sm-8">
							<div class="input-group" style="width: 100%">
								<select name="unit" class="form-control m-b"
									th:with="type=${@dict.getType('xz_assets_unit')}">
									<option value="">所有</option>
									<option th:each="dict : ${type}" th:text="${dict.dictLabel}"
										th:value="${dict.dictValue}"></option>
								</select>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label"><span
							style="color: red;">*</span>数量：</label>
						<div class="col-sm-8">
							<input id="count" name="count" class="form-control" type="text"
								required>
						</div>
					</div>
				</div>

				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label"><span
							style="color: red;">*</span>归属公司：</label>
						<div class="col-sm-8">
							<div class="input-group" style="width: 100%">
								<select name="attach" class="form-control m-b"
									th:with="type=${@dict.getType('xz_assets_attach')}" required>
									<option value=""></option>
									<option th:each="dict : ${type}" th:text="${dict.dictLabel}"
										th:value="${dict.dictValue}"></option>
								</select>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label"><span
							style="color: red;">*</span>采购单号：</label>
						<div class="col-sm-8">
							<input id="purchaseNum" name="purchaseNum" class="form-control"
								type="text" required>
						</div>
					</div>
				</div>

			</div>
			<h4 class="form-header h4">详细信息</h4>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">品牌：</label>
						<div class="col-sm-8">
							<div class="input-group" style="width: 100%">
								<select name="brand" class="form-control m-b"
									th:with="type=${@dict.getType('xz_assets_brand')}">
									<option value=""></option>
									<option th:each="dict : ${type}" th:text="${dict.dictLabel}"
										th:value="${dict.dictValue}"></option>
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">购买地址：</label>
						<div class="col-sm-8">
							<input id="buyAddress" name="buyAddress" class="form-control"
								type="text">
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">发票类型：</label>
						<div class="col-sm-8">
							<div class="input-group" style="width: 100%">
								<select name="invoiceType" class="form-control m-b"
									th:with="type=${@dict.getType('xz_assets_invoiceType')}">
									<option value=""></option>
									<option th:each="dict : ${type}" th:text="${dict.dictLabel}"
										th:value="${dict.dictValue}"></option>
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">发票编号：</label>
						<div class="col-sm-8">
							<input id="invoiceNum" name="invoiceNum" class="form-control"
								type="text">
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				 <div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label"><span style="color: red; ">*</span>采购人：</label>
						<div class="col-sm-8">
							<input id="purchaseBy" name="purchaseBy" class="form-control"
								type="text" required>
						</div>
					</div>
				</div> 
				
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label"><span
							style="color: red;">*</span>购入时间：</label>
						<div class="col-sm-8">
							<input id="buyDate" name="buyDate" class="form-control"
								type="text">
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<!-- <div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">附件：</label>
						<div class="col-sm-8">
							<input id="annex" name="annex" class="form-control" type="text">
						</div>
					</div>
				</div> -->
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">附件：</label>
						<div class="col-sm-8">
							<input name="annex" id="annex" type="hidden"> <input
								name="annexfile" id="annexfile" class="form-control" type="file">
							<button type="button" class="btn btn-sm btn-primary"
								onclick="shangchuan()">
								<i class="fa fa-check"></i>上传
							</button>
							&nbsp;
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">备注：</label>
						<div class="col-sm-8">
							<input id="remarks" name="remarks" class="form-control"
								type="text">
						</div>
					</div>
				</div>
			</div>
			<h4 class="form-header h4">扩展信息</h4>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">扩展金额：</label>
						<div class="col-sm-8">
							<input id="extendMoney" name="extendMoney" class="form-control"
								type="text">
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">扩展时间：</label>
						<div class="col-sm-8">
							<input id="extendTime" name="extendTime" class="form-control"
								type="text">
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-3 control-label">扩展内容：</label>
						<div class="col-sm-8">
							<input id="extendContent" name="extendContent"
								class="form-control" type="text">
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="row">
		<div class="col-sm-offset-5 col-sm-10">
			<button type="button" class="btn btn-sm btn-danger"
				onclick="closeItem()">
				<i class="fa fa-reply-all"></i>取消
			</button>
			&nbsp;&nbsp;
			<button type="button" class="btn btn-sm btn-success"
				onclick="submitHandlerSub()">
				<i class="fa fa-check"></i>提交
			</button>
			&nbsp;&nbsp;
			<button type="button" class="btn btn-sm btn-primary"
				onclick="submitHandler()">
				<i class="fa fa-check"></i>保存
			</button>
		</div>
	</div>
	<div th:include="include::footer"></div>
	<script type="text/javascript">
		var prefix = ctx + "system/xzAsstes"
		$("#form-xzAsstes-add").validate({
			rules : {
				xxxx : {
					required : true,
				},
			},
			focusCleanup : true
		});
		function submitHandler() {
			if ($.validate.form()) {
				$.operate.saveTab(prefix + "/add", $('#form-xzAsstes-add')
						.serialize());
			}
		}
		function submitHandlerSub() {
			if ($.validate.form()) {
				$.operate.saveTab(prefix + "/addSub", $('#form-xzAsstes-add')
						.serialize());
			}
		}
		$(function() {
			//初始化日期选择器
			layui.use('laydate', function() {
				var laydate = layui.laydate;
				laydate.render({
					elem : '#buyDate', //指定元素
					trigger : 'click'
				});
				laydate.render({
					elem : '#extendTime', //指定元素
					trigger : 'click'
				});
			});
		});
		function shangchuan() {
			var formData = new FormData();
			if ($('#annexfile')[0].files[0] == null) {
				$.modal.alertWarning("请先选择文件路径");
				return false;
			}
			formData.append('fileName', $("#annexfile").val());
			formData.append('file', $('#annexfile')[0].files[0]);
			$.ajax({
				url : "/common/upload1",
				type : 'post',
				cache : false,
				data : formData,
				processData : false,
				contentType : false,
				dataType : "json",
				success : function(result) {
					$("#annex").val(result.url);
					$.modal.alertSuccess("上传成功");
				}
			});
		}
	</script>
</body>
</html>