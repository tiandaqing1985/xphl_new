<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.finance.FacPayPublicApplyMapper">
    
    <resultMap type="FacPayPublicApply" id="FacPayPublicApplyResult">
        <result property="id"    column="id"    />
        <result property="num"    column="num"    />
        <result property="name"    column="name"    />
        <result property="user"    column="user"    />
        <result property="weatherInvoice"    column="weather_invoice"    />
        <result property="createTime"    column="create_time"    />
        <result property="amount"    column="amount"    />
        <result property="payee"    column="payee"    />
        <result property="payeeBank"    column="payee_bank"    />
        <result property="payeeAccount"    column="payee_account"    />
        <result property="remarks"    column="remarks"    />
        <result property="updateTime"    column="update_time"    />
        <result property="status"    column="status"    />
        <result property="oprTime"    column="opr_time"    />
    </resultMap>
	
	<sql id="selectFacPayPublicApplyVo">
        select id, num, name, user, weather_invoice, create_time, amount, payee, payee_bank, payee_account, remarks, update_time, status, opr_time from fac_pay_public_apply
    </sql>
	
    <select id="selectFacPayPublicApplyList" parameterType="com.ruoyi.system.domain.finance.FacPayPublicApply" resultType="com.ruoyi.system.domain.finance.FacPayPublicApply">
        SELECT
  a.`num`,
  a.name,
  a.amount,
  c.`dept_name` AS deptName,
  b.`user_name` AS userName,
  a.`weather_invoice` AS weatherInvoice,
  a.status,
  a.`create_time` AS createTime
FROM
  fac_pay_public_apply AS a
  LEFT JOIN sys_user AS b
    ON a.`user` = b.`user_id`
  LEFT JOIN sys_dept AS c
    ON b.`dept_id` = c.`dept_id`
    where 1=1 <if test="userName!= null and userName!=''">b.user_name = #{userName}</if>
    </select>
    
    <select id="selectFacPayPublicApplyById" parameterType="java.lang.String" resultType="com.ruoyi.system.domain.finance.FacPayPublicApply">
        SELECT
        a.num,
        a.name,
        a.amount,
        a.payee,
        a.payee_bank as payeeBank,
        a.payee_account as payeeAccount,
        a.remarks,
        a.status,
        c.`dept_name` AS deptName,
        b.`user_name` AS userName,
        a.`weather_invoice` AS weatherInvoice,
        a.status,
        a.`create_time` AS createTime
        FROM
        fac_pay_public_apply AS a
        LEFT JOIN sys_user AS b
        ON a.`user` = b.`user_id`
        LEFT JOIN sys_dept AS c
        ON b.`dept_id` = c.`dept_id`
        where 1=1 <if test="num!= null and num!=''">and  a.num = #{num}</if>
    </select>
        
    <insert id="insertFacPayPublicApply" parameterType="FacPayPublicApply" useGeneratedKeys="true" keyProperty="id">
        insert into fac_pay_public_apply
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="num != null  and num != ''  ">num,</if>
			<if test="name != null  and name != ''  ">name,</if>
			<if test="user != null  ">user,</if>
			<if test="weatherInvoice != null  and weatherInvoice != ''  ">weather_invoice,</if>
			<if test="createTime != null  ">create_time,</if>
			<if test="amount != null  ">amount,</if>
			<if test="payee != null  and payee != ''  ">payee,</if>
			<if test="payeeBank != null  and payeeBank != ''  ">payee_bank,</if>
			<if test="payeeAccount != null  and payeeAccount != ''  ">payee_account,</if>
			<if test="remarks != null  and remarks != ''  ">remarks,</if>
			<if test="updateTime != null  ">update_time,</if>
			<if test="status != null  and status != ''  ">status,</if>
			<if test="oprTime != null  and oprTime != ''  ">opr_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="num != null  and num != ''  ">#{num},</if>
			<if test="name != null  and name != ''  ">#{name},</if>
			<if test="user != null  ">#{user},</if>
			<if test="weatherInvoice != null  and weatherInvoice != ''  ">#{weatherInvoice},</if>
			<if test="createTime != null  ">#{createTime},</if>
			<if test="amount != null  ">#{amount},</if>
			<if test="payee != null  and payee != ''  ">#{payee},</if>
			<if test="payeeBank != null  and payeeBank != ''  ">#{payeeBank},</if>
			<if test="payeeAccount != null  and payeeAccount != ''  ">#{payeeAccount},</if>
			<if test="remarks != null  and remarks != ''  ">#{remarks},</if>
			<if test="updateTime != null  ">#{updateTime},</if>
			<if test="status != null  and status != ''  ">#{status},</if>
			<if test="oprTime != null  and oprTime != ''  ">#{oprTime},</if>
         </trim>
    </insert>
	 
    <update id="updateFacPayPublicApply" parameterType="FacPayPublicApply">
        update fac_pay_public_apply
        <trim prefix="SET" suffixOverrides=",">
            <if test="num != null  and num != ''  ">num = #{num},</if>
            <if test="name != null  and name != ''  ">name = #{name},</if>
            <if test="user != null  ">user = #{user},</if>
            <if test="weatherInvoice != null  and weatherInvoice != ''  ">weather_invoice = #{weatherInvoice},</if>
            <if test="createTime != null  ">create_time = #{createTime},</if>
            <if test="amount != null  ">amount = #{amount},</if>
            <if test="payee != null  and payee != ''  ">payee = #{payee},</if>
            <if test="payeeBank != null  and payeeBank != ''  ">payee_bank = #{payeeBank},</if>
            <if test="payeeAccount != null  and payeeAccount != ''  ">payee_account = #{payeeAccount},</if>
            <if test="remarks != null  and remarks != ''  ">remarks = #{remarks},</if>
            <if test="updateTime != null  ">update_time = #{updateTime},</if>
            <if test="status != null  and status != ''  ">status = #{status},</if>
            <if test="oprTime != null  and oprTime != ''  ">opr_time = #{oprTime},</if>
        </trim>
        where id = #{id}
    </update>

	<delete id="deleteFacPayPublicApplyById" parameterType="Integer">
        delete from fac_pay_public_apply where id = #{id}
    </delete>
	
    <delete id="deleteFacPayPublicApplyByIds" parameterType="String">
        delete from fac_pay_public_apply where id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
    
</mapper>